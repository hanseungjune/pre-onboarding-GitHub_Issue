# ToyPJT - GitHub Issue Web Page

ğŸ‘†ğŸ» ì œëª©ì„ í´ë¦­í•˜ë©´ ë°°í¬ëœ ì‚¬ì´íŠ¸ë¥¼ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<br/>

## ğŸ—“ï¸ ê¸°ê°„

- 2023ë…„ 7ì›” 11ì¼ ~ 2023ë…„ 07ì›” 14ì¼

## ğŸ§­ ëª©ì 

- [GitHub REST API](https://docs.github.com/en/rest)ë¡œ GitHub Issue í˜ì´ì§€ êµ¬í˜„í•˜ê¸°
- ë¬´í•œ ìŠ¤í¬ë¡¤ì„ ì‚¬ìš©í•´ì„œ HTTPS ìš”ì²­ í•´ë³´ê¸°

<br/>

## âœ… Task

### â—í•„ìˆ˜ ìš”êµ¬ ì‚¬í•­

- â­• ì´ìŠˆ ëª©ë¡ ë° ìƒì„¸ í™”ë©´ ê¸°ëŠ¥ êµ¬í˜„
- â­• Context APIë¥¼ í™œìš©í•œ API ì—°ë™
- â­• ë°ì´í„° ìš”ì²­ ì¤‘ ë¡œë”© í‘œì‹œ
- â­• ì—ëŸ¬ í™”ë©´ êµ¬í˜„
- â­• ì§€ì •ëœ ì¡°ê±´(open ìƒíƒœ, ì½”ë©˜íŠ¸ ë§ì€ ìˆœ)ì— ë§ê²Œ ë°ì´í„° ìš”ì²­ ë° í‘œì‹œ

### â—ë²”ìœ„

1. ì´ìŠˆ ëª©ë¡ í™”ë©´

   - â­• ì´ìŠˆ ëª©ë¡ ê°€ì ¸ì˜¤ê¸° API í™œìš©
   - â­• open ìƒíƒœì˜ ì´ìŠˆ ì¤‘ ì½”ë©˜íŠ¸ê°€ ë§ì€ ìˆœìœ¼ë¡œ ì •ë ¬
   - â­• ê° í–‰ì—ëŠ” â€˜ì´ìŠˆë²ˆí˜¸, ì´ìŠˆì œëª©, ì‘ì„±ì, ì‘ì„±ì¼, ì½”ë©˜íŠ¸ìˆ˜â€™ë¥¼ í‘œì‹œ
   - â­• ë‹¤ì„¯ë²ˆì§¸ ì…€ë§ˆë‹¤ ê´‘ê³  ì´ë¯¸ì§€ ì¶œë ¥
   - â­• í™”ë©´ì„ ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤ í•  ì‹œ ì´ìŠˆ ëª©ë¡ ì¶”ê°€ ë¡œë”©(ì¸í”¼ë‹ˆí‹° ìŠ¤í¬ë¡¤)

2. ì´ìŠˆ ìƒì„¸ í™”ë©´

   - â­• ì´ìŠˆì˜ ìƒì„¸ ë‚´ìš© í‘œì‹œ
   - â­• â€˜ì´ìŠˆë²ˆí˜¸, ì´ìŠˆì œëª©, ì‘ì„±ì, ì‘ì„±ì¼, ì½”ë©˜íŠ¸ ìˆ˜, ì‘ì„±ì í”„ë¡œí•„ ì´ë¯¸ì§€, ë³¸ë¬¸' í‘œì‹œ

3. ê³µí†µ í—¤ë”

   - â­• ë‘ í˜ì´ì§€ëŠ” ê³µí†µ í—¤ë”ë¥¼ ê³µìœ í•©ë‹ˆë‹¤.
   - â­• í—¤ë”ì—ëŠ” Organization Name / Repository Nameì´ í‘œì‹œë©ë‹ˆë‹¤.

<br/>

## ğŸ’¡ ì§„í–‰ë°©ì‹

1.  ì»¨ë²¤ì…˜ì„ ì§€ì •í•˜ì—¬ [ìœ„í‚¤](https://github.com/hanseungjune/pre-onboarding-11th-3-3/wiki/Editing--Convention)ì— ì •ë¦¬í•´ ë‘ì—ˆìŠµë‹ˆë‹¤.

2.  êµ¬í˜„ì„ ìš°ì„ ìˆœìœ„ë¡œí•˜ê³ , íŠ¸ëŸ¬ë¸” ìŠˆíŒ…ì´ë‚˜ ë¦¬íŒ©í† ë§ í•  ë¶€ë¶„ì´ ìˆë‹¤ë©´, ì¶”ê°€ì ìœ¼ë¡œ ì§„í–‰í•  ì˜ˆì •ì…ë‹ˆë‹¤.

<br/>

## ğŸ–ï¸ Members

<table border>
  <tbody>
    <tr>
      <td align="center" width="200px">
        <img width="100%" src="https://avatars.githubusercontent.com/u/92035406?v=4"  alt=""/>
        FE.<br/>
        <a href="https://github.com/hanseungjune">
          <img src="https://img.shields.io/badge/í•œìŠ¹ì¤€-000000?style=flat-round&logo=GitHub&logoColor=white"/>
        </a>
      </td>
     </tr>
  </tbody>
</table>

<br/>

## ğŸ› ï¸ Stacks

![react](https://user-images.githubusercontent.com/123078739/234895132-18ab503a-fcc7-486d-b89a-cb0cc1f7796b.svg) ![eslint](https://user-images.githubusercontent.com/123078739/234895191-c1198a7b-9e2e-499a-8e61-c3b87bf8e2c2.svg)
![prettier](https://img.shields.io/badge/prettier-F7B93E?style=for-the-badge&logo=prettier&logoColor=black) ![typescript](https://user-images.githubusercontent.com/123078739/234895162-42f905c6-765d-44d2-bcb1-b011286ef6b2.svg) ![styledcomponents](https://user-images.githubusercontent.com/123078739/234895185-7fd6c334-faca-4520-8551-2f20b32f085e.svg)

<br/>

### ğŸ“ ê¸°ëŠ¥

- ì´ìŠˆ ëª©ë¡
- ì´ìŠˆ ìƒì„¸
- ì´ìŠˆ ëª©ë¡ ì¸í”¼ë‹ˆí‹° ìŠ¤í¬ë¡¤

<table border>
  <tr>
    <td><img src="./GitHub Issues Pages.gif" alt="GitHub issue Page"/></td>
  </tr>
  <tr>
    <td align="center">GitHub issue Page</td>
  </tr>
</table>

### ğŸŒ³ File Tree

```
ğŸ“¦src
 â”£ ğŸ“‚api
 â”ƒ â”£ ğŸ“œIssueContext.tsx
 â”ƒ â”— ğŸ“œIssueDetailContext.tsx
 â”£ ğŸ“‚components
 â”ƒ â”£ ğŸ“œErrorScreen.tsx
 â”ƒ â”£ ğŸ“œHeader.tsx
 â”ƒ â”£ ğŸ“œIssueContent.tsx
 â”ƒ â”£ ğŸ“œIssueImg.tsx
 â”ƒ â”£ ğŸ“œLayout.tsx
 â”ƒ â”— ğŸ“œLoading.tsx
 â”£ ğŸ“‚pages
 â”ƒ â”£ ğŸ“œDetail.tsx
 â”ƒ â”£ ğŸ“œIssue.tsx
 â”ƒ â”— ğŸ“œNotFound.tsx
 â”£ ğŸ“‚styles
 â”ƒ â”— ğŸ“œissuesStyle.ts
 â”£ ğŸ“œApp.tsx
 â”£ ğŸ“œGlobalStyle.ts
 â”£ ğŸ“œindex.tsx
 â”— ğŸ“œreact-app-env.d.ts
```

### âœ¨ GitHub Issues Web Page

#### ğŸ’¥ë¦¬íŒ©í† ë§

- Case 01.

  - ë¼ìš°í„°

  ```js
  <Router>
    <Routes>
      <Route path="/" element={<Layout />}>
        <Route
          path="/issue"
          element={
            <IssueProvider>
              <Issue />
            </IssueProvider>
          }
        />
        <Route
          path="/issue/:id"
          element={
            <IssueDetailProvider>
              <Detail />
            </IssueDetailProvider>
          }
        />
      </Route>
      <Route path="*" element={<NotFound />} />
    </Routes>
  </Router>
  ```

  - í•´ë‹¹ì½”ë“œê°€ ê¸¸ì–´ì§€ë©´, App ìµœìƒìœ„ ì»´í¬ë„ŒíŠ¸ì˜ ì½”ë“œê°€ ë³µì¡ì„±ì´ ë„ˆë¬´ ë†’ì•„ì§„ë‹¤. ê·¸ë¦¬ê³  ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬ê°€ ì•ˆë˜ì–´ìˆë‹¤ê³  ìƒê°í–ˆë‹¤. ê·¸ë˜ì„œ routerì—ëŒ€í•œ íŒŒì¼ì„ ë”°ë¡œ ë§Œë“¤ê³  Appì— import í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì§„í–‰í•˜ëŠ”ê²Œ ë§ì§€ ì•Šë‚˜ í•˜ëŠ” ìƒê°ì´ ë“¤ì–´ì„œ ê·¸ëŸ° ìƒê°ìœ¼ë¡œ ì‘ì—…í–ˆë‹¤.

  ```ts
  // ì—¬ê¸°ì„œëŠ” í˜ì´ì§€ ì»´í¬ë„ŒíŠ¸ë¥¼ ë ˆì´ì§€ ë¡œë”©í•©ë‹ˆë‹¤.
  // í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ê°€ ì‹¤ì œë¡œ í•„ìš”í•œ ì‹œì ì—ë§Œ ë¡œë“œë˜ë„ë¡ í•˜ê¸° ìœ„í•¨ì…ë‹ˆë‹¤.
  const Issue = lazy(() => import('./pages/Issue'));
  const Detail = lazy(() => import('./pages/Detail'));
  const NotFound = lazy(() => import('./pages/NotFound'));

  const RouterComponent = () => (
    <Router>
      <Routes>
        <Route index element={<Issue />} />
        <Route path="/issues" element={<Issue />} />
        <Route path="/issues/:id" element={<Detail />} />
        <Route path="/notFound" element={<NotFound />} />
        <Route path="*" element={<NotFound />} />
      </Routes>
    </Router>
  );

  export default RouterComponent;
  ```
  
  Reactì˜ lazyëŠ” React ì»´í¬ë„ŒíŠ¸ì˜ ì½”ë“œ ë¶„í• ì„ ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ì›¹ í˜ì´ì§€ëŠ” ì²˜ìŒ ë¡œë”©ë  ë•Œ ëª¨ë“  ìŠ¤í¬ë¦½íŠ¸ë¥¼ í•œ ë²ˆì— ë‹¤ìš´ë¡œë“œë°›ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ëŸ° ë°©ì‹ì€ í˜ì´ì§€ê°€ ë³µì¡í•´ì§€ê³  ì»¤ì§ˆìˆ˜ë¡ ì´ˆê¸° ë¡œë”© ì†ë„ê°€ ëŠë ¤ì§‘ë‹ˆë‹¤.

  lazyë¥¼ ì‚¬ìš©í•˜ë©´ ì‚¬ìš©ìê°€ ì‹¤ì œë¡œ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ë¥¼ ë³´ë ¤ê³  í•  ë•Œ (ì˜ˆ: íŠ¹ì • ë¼ìš°íŠ¸ì— ì ‘ê·¼í•  ë•Œ) í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ì˜ ì½”ë“œë¥¼ ë¡œë“œí•©ë‹ˆë‹¤. ì´ëŠ” ë„¤íŠ¸ì›Œí¬ ì‚¬ìš©ëŸ‰ì„ ì¤„ì´ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ì´ˆê¸° ë¡œë”© ì†ë„ë¥¼ í–¥ìƒì‹œí‚µë‹ˆë‹¤.

  ```ts
  function App() {
    return (
      <>
        <GlobalStyle />
        <Header />
        <IssueProvider>
          <IssueDetailProvider>
            <Suspense fallback={<Loading />}>
              <RouterComponent />
            </Suspense>
          </IssueDetailProvider>
        </IssueProvider>
      </>
    );
  }

  export default App;
  ```

  Suspenseì™€ fallback ì†ì„±ì€ Reactì˜ ì½”ë“œ ë¶„í•  ê¸°ëŠ¥ì„ ë” ì˜ í™œìš©í•˜ë„ë¡ ë„ì™€ì¤ë‹ˆë‹¤.

  SuspenseëŠ” ì–´ë–¤ ì»´í¬ë„ŒíŠ¸ì˜ ë Œë”ë§ì´ ì§€ì—°ë˜ëŠ” ë™ì•ˆ(ì˜ˆ: ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ê±°ë‚˜, lazyë¡œ ì½”ë“œ ë¶„í• ëœ ì»´í¬ë„ŒíŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ê²½ìš° ë“±) ì„ì‹œë¡œ ë‹¤ë¥¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ë³´ì—¬ì¤„ ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì•„ì§ ë¡œë“œë˜ì§€ ì•Šì€ ì»´í¬ë„ŒíŠ¸ê°€ ìˆì„ ë•Œ ë¡œë”© ì¸ë””ì¼€ì´í„°ë¥¼ ë³´ì—¬ì£¼ëŠ” ë“±ì˜ ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

  fallback ì†ì„±ì€ Suspense ì»´í¬ë„ŒíŠ¸ê°€ ê°ì‹¸ê³  ìˆëŠ” ì»´í¬ë„ŒíŠ¸ë“¤ ì¤‘ í•˜ë‚˜ë¼ë„ ì•„ì§ ì¤€ë¹„ë˜ì§€ ì•Šì•˜ì„ ë•Œ ë³´ì—¬ì£¼ëŠ” ëŒ€ì²´ ì»´í¬ë„ŒíŠ¸ë¥¼ ì§€ì •í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, fallback={<Loading />}ë¼ê³  ì§€ì •í•˜ë©´ ì•„ì§ ë¡œë“œë˜ì§€ ì•Šì€ ì»´í¬ë„ŒíŠ¸ê°€ ìˆì„ ë•Œ Loading ì»´í¬ë„ŒíŠ¸ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.

- Case 02.

  - Issues && Detail
  
    - Issues
      ```ts
      const Issue = () => {
        const { issues, loading, error } = useContext(IssueContext);

        if (loading) {
          return <Loading />;
        }
        if (error) {
          return <ErrorScreen />;
        }

        return (
          <>
            {issues.map((issue, index) => {
              if (issue.state !== 'img') {
                return (
                  <IssueContent
                    key={issue.id}
                    id={issue.id}
                    title={issue.title}
                    user={issue.user}
                    updateAt={issue.updated_at}
                    comments={issue.comments}
                  />
                );
              } else {
                return <IssueImg key={`${issue.src}-${index}`} src={issue.src} />;
              }
            })}
          </>
        );
      };

      export default Issue;
      ```

      í•´ë‹¹ ì½”ë“œê°€ ì¢€ ì´í•´í•˜ê¸°ì—ëŠ” ë³µì¡ì„±ì´ ë†’ë‹¤ê³  ìƒê°í–ˆê³ , ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬ê°€ ì œëŒ€ë¡œ ë˜ì–´ìˆì§€ ì•Šë‹¤ê³  ìƒê°í•˜ì—¬, ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ” í•¨ìˆ˜ëŠ” Custom Hookìœ¼ë¡œ ë§Œë“¤ì—ˆê³ , ì»´í¬ë„ŒíŠ¸ë¥¼ ì¡°ê¸ˆ ë” ì„¸ë°€í•˜ê²Œ ìª¼ê°¤ ìˆ˜ ìˆì–´ì„œ, ì»´í¬ë„ŒíŠ¸ë¥¼ í•˜ë‚˜ ë” ë§Œë“¤ì—ˆë‹¤.

      ```ts
      export const useIssues = () => {
        const { issues, loading, error } = useContext(IssueContext);

        return { issues, loading, error };
      };
      ```

      Context APIì˜ ê²°ê³¼ë¬¼ì„ ê°€ì§€ê³  ì˜¬ ìˆ˜ ìˆëŠ” ê²ƒì„ Hookìœ¼ë¡œ ë”°ë¡œ ë¹¼ë‚´ì„œ ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬ ì‹œì¼œë²„ë ¸ë‹¤.

      ```ts
      export const renderIssue = (issue: issuesType, index: number) => {
        if (issue.state !== 'img') {
          return (
            <IssueContent
              key={issue.id}
              id={issue.id}
              title={issue.title}
              user={issue.user}
              updateAt={issue.updated_at}
              comments={issue.comments}
            />
          );
        } else {
          return <IssueImg key={`${issue.src}-${index}`} src={issue.src} />;
        }
      };

      const Issue = () => {
        const { issues, loading, error } = useContext(IssueContext);

        if (loading) {
          return <Loading />;
        }
        if (error) {
          return <ErrorScreen />;
        }

        return <>{issues.map(renderIssue)}</>;
      };

      export default Issue;
      ```

      ì„œë¸Œ ì»´í¬ë„ŒíŠ¸ íŒŒì¼ì„ ë”°ë¡œ ë§Œë“¤ì–´ë²„ë¦´ê¹Œ í•˜ë‹¤ê°€ íš¡ë‹¨ ê´€ì‹¬ì‚¬ë¼ëŠ” ê²ƒì´ ìƒê°ë‚˜ì„œ, ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ì–´ì„œ UIìì²´ë¥¼ ë¶„í• í•˜ë˜ ì ˆì°¨ì§€í–¥ìœ¼ë¡œ ì»´í¬ë„ŒíŠ¸ë¥¼ ë°°ì¹˜í•´ì„œ ì—°ê²°ì„±ì„ ë³´ì—¬ì£¼ëŠ” ê²ƒì´ ì¢‹ë‹¤ê³  ìƒê°í•˜ì—¬ ì´ë ‡ê²Œ ì½”ë“œë¥¼ ì‘ì„±í–ˆë‹¤. ê·¸ë˜ì„œ main ì»´í¬ë„ŒíŠ¸ì¸ issues ì»´í¬ë„ŒíŠ¸ê°€ ì¡°ê¸ˆ ë” ê°€ë…ì„±ì´ ì¢‹ì•„ë³´ì˜€ë‹¤.

    - Detail
      ```ts
      const Detail = () => {
        const { id } = useParams();
        const [text, setText] = useState<string[] | null | undefined>([]);
        const { issueDetail, loading, error, fetchIssueDetail } =
          useContext(IssueDetailContext);

        useEffect(() => {
          if (id) {
            fetchIssueDetail(id);
          }
        }, [id]);

        useEffect(() => {
          const bodySplit = issueDetail?.body?.split('\n');
          setText(bodySplit || []);
        }, [issueDetail.body]);

        if (loading) {
          return <Loading />;
        }
        if (error) {
          return <ErrorScreen />;
        }

        return (
          <div>
            <IssueContent
              id={issueDetail.number}
              title={issueDetail.title}
              user={issueDetail.login}
              updateAt={issueDetail.updated_at}
              comments={issueDetail.comments}
              img={issueDetail.avatar_url}
            />
            <IssueDetailBodyStyle>
              {text?.map((content: string, idx: number) => {
                const firstWord = content.split(' ')[0];
                const remainingContent = content.substring(firstWord.length).trim();
                let headingLevel = 0;
                if (
                  firstWord === '#' ||
                  firstWord === '##' ||
                  firstWord === '###' ||
                  firstWord === '####' ||
                  firstWord === '#####' ||
                  firstWord === '#######'
                ) {
                  headingLevel = firstWord.length;
                }
                return (
                  <div
                    key={idx}
                    style={{
                      fontSize:
                        headingLevel !== 0 ? `${24 - headingLevel * 2}px` : 'inherit',
                      fontWeight:
                        headingLevel !== 0 ? 500 + headingLevel * 100 : 'normal',
                    }}
                  >
                    {remainingContent}
                  </div>
                );
              })}
            </IssueDetailBodyStyle>
          </div>
        );
      };
      export default Detail;
      ```

      í•´ë‹¹ ì½”ë“œ ì—­ì‹œ ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬ê°€ ì „í˜€ ë˜ì–´ ìˆì§€ ì•Šë‹¤.
      ê·¸ë¦¬ê³  ë§ˆí¬ë‹¤ìš´ í˜•íƒœì˜ ë¬¸ìì—´ì´ê¸° ë•Œë¬¸ì— í•´ë‹¹ ë¶€ë¶„ë“¤ì€ ì»´íŒŒì¼í•˜ì—¬ ë¸Œë¼ìš°ì €ì— ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆê²Œ í•´ì•¼í•  ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤.

      ```ts
      import { useContext, useEffect } from 'react';
      import { IssueDetailContext } from '../api/IssueDetailContext';

      export const useIssueDetail = (id: string | undefined) => {
        const { issueDetail, loading, error, fetchIssueDetail } =
          useContext(IssueDetailContext);

        useEffect(() => {
          if (id) {
            fetchIssueDetail(id);
          }
        }, [id]);

        return { issueDetail, loading, error };
      };
      ```

      Context APIì˜ ê²°ê³¼ë¬¼ì„ ê°€ì§€ê³  ì˜¬ ìˆ˜ ìˆëŠ” ê²ƒì„ Hookìœ¼ë¡œ ë”°ë¡œ ë¹¼ë‚´ì„œ ê´€ì‹¬ì‚¬ë¥¼ ë¶„ë¦¬ ì‹œì¼œë²„ë ¸ë‹¤.

      ```ts
      const Detail = () => {
        const { id } = useParams();
        const { issueDetail, loading, error } = useIssueDetail(id);

        if (loading) {
          return <Loading />;
        }
        if (error) {
          return <ErrorScreen />;
        }

        return (
          <div>
            <IssueContent
              id={issueDetail.number}
              title={issueDetail.title}
              user={issueDetail.login}
              updateAt={issueDetail.updated_at}
              comments={issueDetail.comments}
              img={issueDetail.avatar_url}
            />
            <IssueDetailBodyStyle className="markdown-body">
              <ReactMarkdown>{issueDetail.body || ''}</ReactMarkdown>
            </IssueDetailBodyStyle>
          </div>
        );
      };
      export default Detail;
      ```

      ReactMarkdown ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•´ì„œ issueDetail.body ë¥¼ í†µìœ¼ë¡œ ë°›ì•„ì™€ì„œ ë§ˆí¬ë‹¤ìš´ì„ HTMLë¡œ íŒŒì‹±í•˜ëŠ” ì‘ì—…ì„ í•œë‹¤.
      ê·¸ë¦¬ê³  issueDetailì— ëŒ€í•œ ê´€ì‹¬ì‚¬ ë¶„ë¦¬ë¥¼ í†µí•´ì„œ useIssueDetailë¼ëŠ” Hookì„ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•˜ì—¬ export í•´ì˜¨ë‹¤.

  - Case 03.

    - Context API (IssueContext)

      íš¡ë‹¨ ê´€ì‹¬ì‚¬ì— ëŒ€í•œ ë¶„ë¦¬ê°€ ë˜ì–´ìˆì§€ ì•Šì•„ì„œ Custom Hookê³¼ ê°ì¢… í•¨ìˆ˜ë¥¼ í†µí•´ ê´€ì‹¬ì‚¬ ë¶„ë¦¬ë¥¼ í•˜ì˜€ìŠµë‹ˆë‹¤. 

      ```ts
      // ê¹ƒí—ˆë¸Œì—ì„œ ì´ìŠˆ HTTP GET ìš”ì²­
      const fetchIssueFromGithub = async (page: number, perPage: number) => {
        const accessToken = process.env.REACT_APP_GITHUB_ACCESS_TOKEN || '';
        const response = await fetch(
          `${process.env.REACT_APP_GITHUB_API_URL}/repos/facebook/react/issues?page=${page}&per_page=${perPage}&sort=comments`,
          {
            method: 'GET',
            headers: {
              Authorization: `Bearer ${accessToken}`,
            },
          }
        );
        const data = await response.json();
        return data;
      };
      ```

      ë¨¼ì € HTTPS ìš”ì²­ì— ëŒ€í•œ ê´€ì‹¬ì‚¬ ë¶„ë¦¬ë¥¼ í•˜ì˜€ìŠµë‹ˆë‹¤.

      ```ts
      // ë‚ ì§œë¥¼ í˜•ì‹ì— ë§ê²Œ í¬ë§·íŒ…
      const formatDate = (dateString: string) => {
        const date = new Date(dateString);
        return `${date.getFullYear()}ë…„ ${date.getMonth() + 1}ì›” ${date.getDate()}ì¼`;
      };

      // ì´ìŠˆ ë°ì´í„°ë¥¼ í•„ìš”í•œ í˜•ì‹ìœ¼ë¡œ ì „ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜
      const formatIssuesData = (data: formatIssuesDataType[]) => {
        const items = [];
        for (let i = 0; i < data.length; i++) {
          items.push({
            state: data[i].state,
            id: data[i].number,
            title: data[i].title,
            user: data[i].user.login,
            updated_at: formatDate(data[i].updated_at),
            comments: data[i].comments,
          });
          if (i % 4 === 3) {
            items.push({
              state: 'img',
              src: `https://freight.cargo.site/t/original/i/4578b55ce1658ae2b74841d9148db68944f8461b1d393d29101a372fa80bef12/Logotype_Before_after.jpg`,
            });
          }
        }
        return items;
      };
      ```

      ë°›ì•„ì˜¨ dataë¥¼ í¬ë§·íŒ…í•˜ì—¬ ì›í•˜ëŠ” í˜•íƒœì˜ ë°ì´í„°ë¡œ ë³€í™˜í•˜ì˜€ìŠµë‹ˆë‹¤.

      ```ts
      // í˜ì´ì§€ì™€ í˜ì´ì§€ë‹¹ ì´ìŠˆ ìˆ˜ë¥¼ ì¸ìë¡œ ë°›ì•„,
      // ì´ìŠˆë¥¼ ê°€ì ¸ì™€ ìƒíƒœë¥¼ ì„¤ì •í•˜ëŠ” Custom Hook
      const useFetchIssues = (perPage: number) => {
        const [issues, setIssues] = useState<issuesType[]>([]);
        const [loading, setLoading] = useState(false);
        const [error, setError] = useState(false);
        const [page, setPage] = useState(1);

        // í˜ì´ì§€, ì´ìŠˆë¥¼ ìƒíƒœ ê´€ë¦¬
        const fetchIssues = async () => {
          setLoading(true);
          try {
            const response = await fetchIssueFromGithub(page, perPage);
            const formattedData: any[] = formatIssuesData(response);
            setIssues((prev: issuesType[]) => [...prev, ...formattedData]);
            setPage(prevPage => prevPage + 1);
          } catch (error: any) {
            console.log(error);
            setError(error);
          } finally {
            setLoading(false);
          }
        };

        return { issues, page, fetchIssues, loading, error };
      };
      ```

      ë°›ì•„ì˜¨ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒíƒœê´€ë¦¬ë¥¼ í•©ë‹ˆë‹¤. 
      ê·¸ë¦¬ê³  í”„ë¡œë°”ì´ë”ë¡œ ë„˜ê²¨ì¤ë‹ˆë‹¤.

      ```ts
      // ì»¨í…ìŠ¤íŠ¸ ìƒì„±
      export const IssueContext = createContext({
        issues: [] as issuesType[],
        fetchIssues: () => {},
        loading: true,
        error: false,
      });

      // ì´ìŠˆë¥¼ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜ì™€ ì´ìŠˆ ìƒíƒœë¥¼ ê´€ë¦¬
      export const IssueProvider = ({ children }: any) => {
        const sentinelRef = useRef<HTMLDivElement | null>(null);
        const perPage = 24;
        const { issues, page, fetchIssues, loading, error } = useFetchIssues(perPage);

        // Intersection Observer APIë¥¼ í™œìš©í•˜ì—¬ ìŠ¤í¬ë¡¤ì´ í˜ì´ì§€ í•˜ë‹¨ì— ë„ë‹¬í–ˆì„ ë•Œ ìƒˆë¡œìš´ ì´ìŠˆë¥¼ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.
        const handleIntersection = (entries: any) => {
          const target = entries[0];
          if (target.isIntersecting) {
            fetchIssues();
          }
        };

        // ì»´í¬ë„ŒíŠ¸ê°€ ë§ˆìš´íŠ¸ë  ë•Œ ì´ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ì—¬ êµì°¨ì  ê´€ì°°ì„ ì‹œì‘í•©ë‹ˆë‹¤.
        useEffect(() => {
          const observer = new IntersectionObserver(handleIntersection, {
            root: null,
            rootMargin: '0px',
            threshold: 1.0,
          });

          // êµì°¨ì  ê´€ì°° ì‹œì‘
          if (sentinelRef.current) {
            observer.observe(sentinelRef.current);
          }

          // ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ë  ë•Œ êµì°¨ì  ê´€ì°°ì„ ì¤‘ì§€í•©ë‹ˆë‹¤.
          return () => {
            if (sentinelRef.current) {
              observer.unobserve(sentinelRef.current);
            }
          };
        }, [page]);

        // ì´ìŠˆ í”„ë¡œë°”ì´ë”ê°€ children ìš”ì†Œì™€ êµì°¨ì  ìš”ì†Œë¥¼ ë Œë”ë§í•©ë‹ˆë‹¤.
        return (
          <IssueContext.Provider value={{ issues, fetchIssues, loading, error }}>
            {children}
            <div ref={sentinelRef} style={{ height: '10px' }} />
          </IssueContext.Provider>
        );
      };
      ```

      Intersection Observer API ê¸°ë°˜ìœ¼ë¡œ ë¬´í•œìŠ¤í¬ë¡¤ì„ êµ¬í˜„í•˜ëŠ” í”„ë¡œë°”ì´ë” ì½”ë“œë¥¼ ë¶„ë¦¬í•˜ì—¬ ê´€ì‹¬ì‚¬ ë¶„ë¦¬ë¥¼ í•˜ê³ , íš¡ë‹¨ ê´€ì‹¬ì‚¬ë¥¼ ìœ ì§€ í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤.

    - Context API (IssueDetailContext)

      íš¡ë‹¨ ê´€ì‹¬ì‚¬ì— ëŒ€í•œ ë¶„ë¦¬ê°€ ë˜ì–´ìˆì§€ ì•Šì•„ì„œ Custom Hookì„ í†µí•´ ê´€ì‹¬ì‚¬ ë¶„ë¦¬ë¥¼ í•˜ì˜€ìŠµë‹ˆë‹¤. 
      
      ```ts
      export const useFetchDetail = () => {
        const [issueDetail, setIssueDetail] = useState<fetchIssueType>({
          avatar_url: undefined,
          number: null,
          title: null,
          login: null,
          updated_at: null,
          comments: undefined,
          body: null,
        });

        const accessToken: string = process.env.REACT_APP_GITHUB_ACCESS_TOKEN || '';
        const [loading, setLoading] = useState(false);
        const [error, setError] = useState(false);

        const fetchIssueDetail = async (id: string) => {
          setLoading(true);
          try {
            if ((process.env.REACT_APP_GITHUB_API_URL || '') && id && accessToken) {
              const response = await fetch(
                `${
                  process.env.REACT_APP_GITHUB_API_URL || ''
                }/repos/facebook/react/issues/${id}`,
                {
                  method: 'GET',
                  headers: {
                    Authorization: `Bearer ${accessToken}`,
                  },
                }
              );
              const data = await response.json();
              let item = {
                avatar_url: data.user?.avatar_url,
                number: data.number,
                title: data.title,
                login: data.user?.login,
                updated_at: formatDate(data.updated_at),
                comments: data.comments,
                body: data.body,
              };
              setIssueDetail(item);
            }
          } catch (error) {
            console.log(error);
            setError(true);
          } finally {
            setLoading(false);
          }
        };

        return { issueDetail, loading, error, fetchIssueDetail };
      };
      ```

      useFetchDetailì„ í†µí•´ì„œ idë§ˆë‹¤ fetch í•  ìˆ˜ ìˆê²Œ ë„˜ê²¨ì£¼ê³ ,
      ì›í•˜ëŠ” ë°ì´í„° í˜•íƒœë¡œ issueDetailì„ ë§Œë“¤ì–´ì„œ ë³´ì—¬ì¤€ë‹¤.

      ```ts
      // ì»¨í…ìŠ¤íŠ¸ ìƒì„±
      export const IssueDetailContext = createContext({
        issueDetail: {
          avatar_url: undefined,
          number: null,
          title: null,
          login: null,
          updated_at: null,
          comments: undefined,
          body: null,
        } as fetchIssueType,
        loading: true,
        error: false,
        fetchIssueDetail: (id: string) => {},
      });

      // ì´ìŠˆì˜ ì„¸ë¶€ ë‚´ìš© ìƒíƒœë¥¼ ê´€ë¦¬
      export const IssueDetailProvider = ({ children }: any) => {
        const { issueDetail, loading, error, fetchIssueDetail } = useFetchDetail();

        return (
          <IssueDetailContext.Provider
            value={{ issueDetail, loading, error, fetchIssueDetail }}
          >
            {children}
          </IssueDetailContext.Provider>
        );
      };
      ```

      ì „ì—­ìœ¼ë¡œ í•´ë‹¹ ë°ì´í„° ë° fetch í•¨ìˆ˜ ë³´ë‚´ê¸° ìœ„í•´ì„œ Context APIë¥¼ í™œìš©í•œë‹¤.

<br/>

## âœ’ï¸ íšŒê³ 

<table>
  <thead>
    <tr>
      <th width="50%">ì¢‹ì•˜ë˜ ì </th>
      <th width="50%">ì•„ì‰¬ì› ë˜ ì </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
      <li>ë¬´í•œìŠ¤í¬ë¡¤ì„ ì˜ˆì „ í”„ë¡œì íŠ¸ì—ì„œ êµ¬í˜„í•˜ì§€ ëª»í•´ì„œ ê·¸ëƒ¥ Get ìš”ì²­ìœ¼ë¡œí•˜ê³ , í˜ì´ì§€ë„¤ì´ì…˜ì„ ì‚¬ìš©í–ˆë˜ ì ì´ ìˆëŠ”ë°, ì´ë²ˆ ê³¼ì œë¥¼ í†µí•´ì„œ ë¬´í•œ ìŠ¤í¬ë¡¤ì— ì§‘ì¤‘í•´ë³¼ ìˆ˜ ìˆì–´ì„œ ì¢‹ì•˜ìŠµë‹ˆë‹¤.</li>
      <li>ë¦¬íŒ©í† ë§ì„ í†µí•´ì„œ ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬ì™€ Custom Hookì— ëŒ€í•´ì„œ ê¹Šê²Œ ìƒê°í•´ë³´ê³  ì‹¤í–‰í–ˆëŠ”ë°, í•˜ê³  ë³´ë‹ˆ ë‚˜ì¤‘ì— ìœ ì§€ë³´ìˆ˜ ìì²´ë¥¼ í•˜ëŠ” ê²ƒì— ë˜ê²Œ í¸í•  ê²ƒì´ë¼ê³  ìƒê°ì´ ë“¤ì–´ì„œ ì¢‹ì•˜ë˜ ê²ƒ ê°™ë‹¤.</li>
      </td>
      <td>
      <li>ê°œì¸ì ì¸ ì‚¬ì •ìœ¼ë¡œ ê³¼ì œë¥¼ 3ì¼ ì •ë„ ëŠ¦ê²Œ ì‹œì‘í–ˆë‹¤. ê·¸ë˜ì„œ ê±°ì˜ í•˜ë£¨ì´í‹€ë§Œì— ë§Œë“¤ë ¤ê³  í•˜ë‹¤ë³´ë‹ˆ í€„ë¦¬í‹°ê°€ ì˜ˆìƒë³´ë‹¤ ì¡°ê¸ˆ ë–¨ì–´ì¡Œë‹¤ê³  ìƒê°í•œë‹¤.</li>
      <li>ì›ë˜ëŠ” ë™ë£Œí•™ìŠµì„ í–ˆì–´ì•¼ í–ˆëŠ”ë°, ê°œì¸ì ì¸ ì‚¬ì •ìœ¼ë¡œ í˜¼ì ê³¼ì œë¥¼ í•´ì•¼í•˜ëŠ” ì…ì¥ì´ë¼ì„œ ì¡°ê¸ˆ ì•„ì‰¬ì› ë‹¤. ë‹¤ìŒì—ëŠ” ë™ë£Œí•™ìŠµì— ì¶©ì‹¤í•˜ì—¬ ë‹¤ë¥¸ ì‚¬ëŒë“¤ì˜ ì½”ë“œë„ ì°¸ê³ í•˜ë©´ì„œ ì„±ì¥í•˜ê³  ì‹¶ë‹¤.</li>
      </td>
    </tr>
  </tbody>
</table>